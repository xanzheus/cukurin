!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDatepicker=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var E=["January","February","March","April","May","June","July","August","September","October","November","December"],u=E.map(function(e){return e.substr(0,3)}),c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=c.map(function(e){return e.substr(0,3)}),p="<span>".concat(m.map(function(e){return e.substr(0,2)}).join("</span><span>"),"</span>"),h=[9,112,113,114,115,116,117,118,119,120,121,122,123],o="_duDatepicker",v={value:null,format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,inline:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[],range:!1,rangeDelim:"-",fromTarget:null,toTarget:null,events:{dateChanged:null,onRangeFormat:null,ready:null,shown:null,hidden:null}},D={appendTo:function(e,t,a){Array.isArray(e)?e.forEach(function(e){0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)}):0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)},addEvent:function(e,t,a){function n(e,t,a){e.addEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},removeEvent:function(e,t,a){function n(e,t,a){e.removeEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createElem:function(e,t,a,n){var r=document.createElement(e);return void 0!==a&&(r[n?"innerHTML":"innerText"]=a),void 0!==t&&D.setAttributes(r,t),r},setAttributes:function(e,t){for(var a in t)e.setAttribute(a,t[a])},setStyles:function(e,t){for(var a in t)e.style[a]=t[a]},getDaysCount:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},dateDiff:function(e,t){return Math.round((t-e)/864e5)},screenDim:function(){var e=document.documentElement;return{height:Math.max(e.offsetHeight,e.clientHeight),width:Math.max(e.offsetWidth,e.clientWidth)}},calcOffset:function(e){var t=document.documentElement||document.body,a=e.getBoundingClientRect(),n={top:a.top+t.scrollTop,left:a.left+t.scrollLeft},r=e.offsetHeight,d=e.offsetWidth,i=D.screenDim();return{top:n.top+r,left:n.left,right:i.width-(n.left+d),bottom:i.height-n.top}},extend:function(e){var a={},n=!1,t=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);for(;t<r;t++){!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?a[t]=D.extend(!0,a[t],e[t]):a[t]=e[t])}(arguments[t])}return a},formatDate:function(e,t){var a=new Date(e),n=a.getDate(),r=a.getMonth(),d=a.getFullYear();return t.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,function(e){switch(e){case"d":return n;case"dd":return n<10?"0"+n:n;case"D":return m[a.getDay()];case"DD":return c[a.getDay()];case"m":return r+1;case"mm":return r+1<10?"0"+(r+1):r+1;case"mmm":return u[r];case"mmmm":return E[r];case"yy":return d.toString().substr(2,2);case"yyyy":return d}})},parseDate:function(a,e){var n,t,r,d,i,o=void 0===e?this.config.format:e,s=(o.match(/d/g)||[]).length,l=(o.match(/m/g)||[]).length,c=(o.match(/y/g)||[]).length,u=4===l,m=1===l,p=1===s,f=a.length,g=o.indexOf("m"),h=o.indexOf("d"),v=o.indexOf("y"),y="",_="",w="";return""===a?{m:null,d:null,y:null,date:new Date("")}:(u?(n=-1,E.forEach(function(e,t){0<=a.indexOf(e)&&(n=t)}),y=E[n],h=(o=o.replace("mmmm",y)).indexOf("d"),v=v<g?o.indexOf("y"):o.indexOf("y",o.indexOf(y)+y.length)):y=!p&&!m||p&&!m&&g<h?a.substr(g,l):(t=o.lastIndexOf("m"),d=o.substring(g-1,g),i=o.substring(t+1,t+2),t===o.length-1?a.substring(a.indexOf(d,g-1)+1,f):0===g?a.substring(0,a.indexOf(i,g)):a.substring(a.indexOf(d,g-1)+1,a.indexOf(i,g+1))),{m:y,d:_=!p&&!m||!p&&m&&h<g?a.substr(h,s):(r=o.lastIndexOf("d"),d=o.substring(h-1,h),i=o.substring(r+1,r+2),r===o.length-1?a.substring(a.indexOf(d,h-1)+1,f):0===h?a.substring(0,a.indexOf(i,h)):a.substring(a.indexOf(d,h-1)+1,a.indexOf(i,h+1))),y:w=!m&&!p||m&&p&&v<g&&v<h||!m&&p&&v<h||m&&!p&&v<g?a.substr(v,c):(d=o.substring(v-1,v),a.substr(a.indexOf(d,v-1)+1,c)),date:isNaN(parseInt(y))?new Date(y+" "+_+", "+w):new Date(w,y-1,_)})},triggerChange:function(e,t){e.dispatchEvent(new Event("change")),e.dispatchEvent(new Event("onchange")),e.dispatchEvent(new function(e){var t=document.createEvent("CustomEvent");return t.initCustomEvent("datechanged",!1,!1),t.data=e,t}(t))}},s=function(){function g(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var a=this;this.config=D.extend(v,t),this.animating=!1,this.visible=!1,this.input=e,this.input.readonly=!0,this.fromEl=document.querySelector(this.config.fromTarget),this.toEl=document.querySelector(this.config.toTarget),this.input.hidden=this.config.range&&(this.fromEl||this.toEl),this.viewMode="calendar",this.datepicker={container:D.createElem("div",{class:"dcalendarpicker"}),wrapper:D.createElem("div",{class:"dudp__wrapper",tabindex:0}),header:{wrapper:D.createElem("section",{class:"dudp__calendar-header"}),selectedYear:D.createElem("span",{class:"dudp__sel-year"}),selectedDate:D.createElem("span",{class:"dcp_sel-date"})},calendarHolder:{wrapper:D.createElem("section",{class:"dudp__cal-container"}),btnPrev:D.createElem("span",{class:"dudp__btn-cal-prev",role:"button"},"&lsaquo;",!0),btnNext:D.createElem("span",{class:"dudp__btn-cal-next",role:"button"},"&rsaquo;",!0),calendarViews:{wrapper:D.createElem("div",{class:"dudp__calendar-views"}),calendars:[]},yearsView:D.createElem("div",{class:"dudp__years-view dp__hidden"}),monthsView:D.createElem("div",{class:"dudp__months-view dp__hidden"}),buttons:{wrapper:D.createElem("div",{class:"dudp__buttons"}),btnClear:D.createElem("span",{class:"dudp__button clear",role:"button"},"Clear"),btnCancel:D.createElem("span",{class:"dudp__button cancel",role:"button"},"Cancel"),btnOk:D.createElem("span",{class:"dudp__button ok",role:"button"},"Ok")}}},a.config.value&&(a.input.value=a.config.value,a.input.setAttribute("value",a.config.value)),this.minDate=a.input.dataset.mindate||a.config.minDate,this.maxDate=a.input.dataset.maxdate||a.config.maxDate;var n=new Date;if(a.config.range){var r=a.input.value,d=r.split(a.config.rangeDelim);if(""!==r&&d.length<2)throw new Error("duDatePicker: Invalid date range value");var i,o,s,l,c,u=""===r?null:D.parseDate.call(a,d[0]).date,m=""===r?null:D.parseDate.call(a,d[1]).date;this.dateFrom=u,this.dateTo=m,this.rangeFrom=null,this.rangeTo=null,this.viewMonth=(u||n).getMonth(),this.viewYear=(u||n).getFullYear(),r&&(i=a.config.events&&a.config.events.onRangeFormat?a.formatRange(u,m):r,o=D.formatDate(u,a.config.format),s=D.formatDate(u,a.config.outFormat||a.config.format),l=D.formatDate(m,a.config.format),c=D.formatDate(m,a.config.outFormat||a.config.format),a.input.value=i,D.setAttributes(a.input,{value:i,"data-range-from":s,"data-range-to":c}),a.fromEl&&(a.fromEl.value=o,D.setAttributes(a.fromEl,{value:o,"data-value":s})),a.toEl&&(a.toEl.value=l,D.setAttributes(a.toEl,{value:o,"data-value":c})))}else this.date=""===a.input.value?n:D.parseDate.call(a,a.input.value).date,this.selected={year:a.date.getFullYear(),month:a.date.getMonth(),date:a.date.getDate()},this.viewMonth=a.selected.month,this.viewYear=a.selected.year;function p(){a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()}function f(e){return 13===e.keyCode&&(a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()),!(h.indexOf(e.which)<0)}this._unbindInput=function(){a.input.readonly=!1,a.input.removeEventListener("click",p),a.input.removeEventListener("keydown",f),a.fromEl&&(a.fromEl.readonly=!1,a.fromEl.removeEventListener("click",p),a.fromEl.removeEventListener("keydown",f)),a.toEl&&(a.toEl.readonly=!1,a.toEl.removeEventListener("click",p),a.toEl.removeEventListener("keydown",f))},D.addEvent(a.input,"click",p),D.addEvent(a.input,"keydown",f),a.fromEl&&(a.fromEl.readonly=!0,D.addEvent(a.fromEl,"click",p),D.addEvent(a.fromEl,"keydown",f)),a.toEl&&(a.toEl.readonly=!0,D.addEvent(a.toEl,"click",p),D.addEvent(a.toEl,"keydown",f)),this._init(),this._setSelection()}var e,t,a;return e=g,(t=[{key:"_init",value:function(){var n=this,e=n.datepicker,t=e.header,a=e.calendarHolder,r=a.buttons,d=n.selected?n.selected:new Date;n.config.inline||(D.appendTo([t.selectedYear,t.selectedDate],t.wrapper),D.appendTo(t.wrapper,e.wrapper),D.addEvent(t.selectedYear,"click",function(){"years"!==n.viewMode&&n._switchView("years")}),D.addEvent(t.selectedDate,"click",function(){var e=new Date,t=n.config.range?e.getMonth():n.selected.month,a=n.config.range?e.getFullYear():n.selected.year;n.viewMonth===t&&n.viewYear===a&&"calendar"===n.viewMode||(n.viewMonth=t,n.viewYear=a,n._setupCalendar(),n._switchView("calendar"))}));for(var i=0,o=1;o<4;o++){for(var s=D.createElem("div",{class:"dudp__month-row"}),l=0;l<4;l++){var c=D.createElem("span",{class:"dudp__month"});i===d.month&&c.classList.add("selected"),c.innerText=u[i],c.dataset.month=i,D.appendTo(c,s),D.addEvent(c,"click",function(e){var t=this.dataset.month;n.viewMonth=t,n._setupCalendar(),n._switchView("calendar")}),i++}D.appendTo(s,a.monthsView)}D.appendTo(n._getYears(),a.yearsView),n.config.clearBtn&&D.appendTo(r.btnClear,r.wrapper),n.config.cancelBtn&&D.appendTo(r.btnCancel,r.wrapper),n.config.auto&&!n.config.range||D.appendTo(r.btnOk,r.wrapper),D.appendTo([a.btnPrev,a.btnNext,a.calendarViews.wrapper,a.monthsView,a.yearsView,r.wrapper],a.wrapper),D.appendTo(a.wrapper,e.wrapper),D.appendTo(e.wrapper,e.container),D.appendTo(e.container,document.body),n.config.inline&&e.container.setAttribute("inline",!0),e.wrapper.dataset.theme=n.input.dataset.theme||n.config.theme,D.addEvent(e.wrapper,"keydown",function(e){27===e.keyCode?n.hide():37===e.keyCode?n._move("prev"):39===e.keyCode&&n._move("next")}),n.config.inline&&D.addEvent(e.wrapper,"blur",function(){n.hide()}),D.addEvent(a.btnPrev,"click",function(){n._move("prev")}),D.addEvent(a.btnNext,"click",function(){n._move("next")}),D.addEvent(a.calendarViews.wrapper,"click",function(e){e.target.classList.contains("cal-year")?n._switchView("years"):e.target.classList.contains("cal-month")&&n._switchView("months")}),n.config.clearBtn&&D.addEvent(r.btnClear,"click",function(){n.setValue(""),n.hide()}),n.config.overlayClose&&(D.addEvent(e.container,"click",function(){n.hide()}),D.addEvent(e.wrapper,"click",function(e){e.stopPropagation()})),n.config.cancelBtn&&D.addEvent(r.btnCancel,"click",function(){n.hide()}),D.addEvent(r.btnOk,"click",function(){if(n.config.range){if(!n.rangeFrom||!n.rangeTo)return;var e=new Date(n.rangeFrom.year,n.rangeFrom.month,n.rangeFrom.date),t=new Date(n.rangeTo.year,n.rangeTo.month,n.rangeTo.date);if(n._dateDisabled(e)||n._dateDisabled(t))return;n.dateFrom=e,n.dateTo=t,n.setValue([D.formatDate(e,n.config.format),D.formatDate(t,n.config.format)].join(n.config.rangeDelim))}else{var a=new Date(n.selected.year,n.selected.month,n.selected.date);if(n._dateDisabled(a))return;n.date=a,n.setValue(n.date)}n.hide()}),n.config.events&&n.config.events.ready&&n.config.events.ready.call(n,n)}},{key:"_inRange",value:function(e){if(!this.config.range)return!1;var t=this,a=t.rangeFrom?new Date(t.rangeFrom.year,t.rangeFrom.month,t.rangeFrom.date):null,n=t.rangeTo?new Date(t.rangeTo.year,t.rangeTo.month,t.rangeTo.date):null;return a&&a<e&&n&&e<n}},{key:"_dateDisabled",value:function(t){var a=this,e=null,n=null,r=new Date,d=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=a.config.disabledDates,o=a.config.disabledDays,s=0<i.filter(function(e){return 0<=e.indexOf("-")?t>=D.parseDate.call(a,e.split("-")[0]).date&&t<=D.parseDate.call(a,e.split("-")[1]).date:D.parseDate.call(a,e).date.getTime()===t.getTime()}).length,l=0<=o.indexOf(c[t.getDay()])||0<=o.indexOf(m[t.getDay()])||0<=o.indexOf(m.map(function(e){return e.substr(0,2)})[t.getDay()]);return a.minDate&&(e="today"===a.minDate?d:new Date(a.minDate)),a.maxDate&&(n="today"===a.maxDate?d:new Date(a.maxDate)),e&&t<e||n&&n<t||s||l}},{key:"_getDates",value:function(e,t){for(var l=this,a=1,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),d=l.config.range?null:new Date(l.selected.year,l.selected.month,l.selected.date),i=l.rangeFrom?new Date(l.rangeFrom.year,l.rangeFrom.month,l.rangeFrom.date):null,o=l.rangeTo?new Date(l.rangeTo.year,l.rangeTo.month,l.rangeTo.date):null,s=new Date(e,t,a),c=D.getDaysCount(s),u=1,m=[],p=1;p<=6;p++){for(var f=[],g=0;g<7;g++)f.push(D.createElem("span",{class:"dudp__date"}));for(;a<=c;){s.setDate(a);var h=s.getDay();if(f[h].dataset.date=a,f[h].dataset.month=t,f[h].dataset.year=e,s.getTime()===r.getTime()&&f[h].classList.add("current"),l._dateDisabled(s)&&f[h].classList.add("disabled"),l._inRange(s)&&f[h].classList.add("in-range"),1===p&&0===h)break;if(!(h<6)){l.config.range||s.getTime()!==d.getTime()||f[h].classList.add("selected"),l.config.range&&i&&s.getTime()===i.getTime()&&f[h].classList.add("range-from"),l.config.range&&o&&s.getTime()===o.getTime()&&f[h].classList.add("range-to"),f[h].innerText=a++;break}l.config.range||s.getTime()!==d.getTime()||f[h].classList.add("selected"),l.config.range&&i&&s.getTime()===i.getTime()&&f[h].classList.add("range-from"),l.config.range&&o&&s.getTime()===o.getTime()&&f[h].classList.add("range-to"),f[h].innerText=a++}if(1===p||4<p)if(1===p)for(var v=new Date(e,t-1,1),y=D.getDaysCount(v),_=6;0<=_;_--)""===f[_].innerText&&(f[_].dataset.date=y,f[_].dataset.month=t-1,f[_].dataset.year=e,v.setDate(y),f[_].innerText=y--,f[_].classList.add("dudp__pm"),l._dateDisabled(v)&&f[_].classList.add("disabled"),l._inRange(v)&&f[_].classList.add("in-range"),v.getTime()===r.getTime()&&f[_].classList.add("current"),l.config.range||v.getTime()!==d.getTime()||f[_].classList.add("selected"),l.config.range&&i&&v.getTime()===i.getTime()&&f[_].classList.add("range-from"),l.config.range&&o&&v.getTime()===o.getTime()&&f[_].classList.add("range-to"));else if(4<p)for(var w=new Date(e,t+1,1),_=0;_<=6;_++)""===f[_].innerText&&(f[_].dataset.date=u,f[_].dataset.month=t+1,f[_].dataset.year=e,w.setDate(u),f[_].innerText=u++,f[_].classList.add("dudp__nm"),l._dateDisabled(w)&&f[_].classList.add("disabled"),l._inRange(w)&&f[_].classList.add("in-range"),w.getTime()===r.getTime()&&f[_].classList.add("current"),l.config.range||w.getTime()!==d.getTime()||f[_].classList.add("selected"),l.config.range&&i&&w.getTime()===i.getTime()&&f[_].classList.add("range-from"),l.config.range&&o&&w.getTime()===o.getTime()&&f[_].classList.add("range-to"));m.push(f)}var E=[];return m.forEach(function(e){for(var t=D.createElem("div",{class:"dudp__cal-week"}),a=0;a<e.length;a++){var n=e[a];D.addEvent(n,"click",function(){var e,t,d=this.dataset.year,i=this.dataset.month,o=this.dataset.date,a=new Date(d,i,o),s=!1;l._dateDisabled(a)||(l.config.range?(e=l.rangeFrom?new Date(l.rangeFrom.year,l.rangeFrom.month,l.rangeFrom.date):null,t=l.rangeTo?new Date(l.rangeTo.year,l.rangeTo.month,l.rangeTo.date):null,!l.rangeFrom||l.rangeFrom&&a<e||l.rangeFrom&&l.rangeTo&&D.dateDiff(e,a)<=D.dateDiff(a,t)&&0!==D.dateDiff(e,a)||l.rangeFrom&&l.rangeTo&&t.getTime()===a.getTime()?(l.rangeFrom={year:d,month:i,date:o},s=!0):(!l.rangeTo||l.rangeTo&&t<a||l.rangeFrom&&l.rangeTo&&D.dateDiff(a,t)<D.dateDiff(e,a)&&0!==D.dateDiff(a,t)||l.rangeFrom&&l.rangeTo&&e.getTime()===a.getTime())&&(l.rangeTo={year:d,month:i,date:o},s=!1),l.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date,r=l._inRange(new Date(t,a,n));e.classList[d===t&&i===a&&o===n?"add":"remove"](s?"range-from":"range-to"),e.classList[r?"add":"remove"]("in-range")})):(l.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date;e.classList[d===t&&i===a&&o===n?"add":"remove"]("selected")}),this.classList.add("selected"),l.selected={year:d,month:i,date:o},l._setSelection(),l.config.auto&&(l.date=a,l.setValue(l.date),l.hide())),l.datepicker.calendarHolder.wrapper.querySelectorAll(".dudp__month").forEach(function(e){var t=e.dataset.month;e.classList[t===i?"add":"remove"]("selected")}))}),D.appendTo(n,t)}E.push(t)}),E}},{key:"_getYears",value:function(){for(var t=this,e=t.viewYear-50,a=t.viewYear+25,n=[],r=e;r<=a;r++){var d=D.createElem("span",{class:"dudp__year"});r===t.viewYear&&d.classList.add("selected"),d.innerText=r,d.dataset.year=r,D.addEvent(d,"click",function(){var e=parseInt(this.dataset.year);t.viewYear=e,t.config.range||(t.selected.year=e),t._setSelection(),t._setupCalendar(),t._switchView("calendar")}),n.push(d)}return n}},{key:"_setupCalendar",value:function(){var e=this,t=e.datepicker.calendarHolder.calendarViews,a=+e.viewYear,n=+e.viewMonth;t.calendars.length=0;var r={wrapper:D.createElem("div",{class:"dudp__calendar"}),header:D.createElem("div",{class:"dudp__cal-month-year"}),weekDays:D.createElem("div",{class:"dudp__weekdays"},p,!0),datesHolder:D.createElem("div",{class:"dudp__dates-holder"})},d={wrapper:D.createElem("div",{class:"dudp__calendar"}),header:D.createElem("div",{class:"dudp__cal-month-year"}),weekDays:D.createElem("div",{class:"dudp__weekdays"},p,!0),datesHolder:D.createElem("div",{class:"dudp__dates-holder"})},i={wrapper:D.createElem("div",{class:"dudp__calendar"}),header:D.createElem("div",{class:"dudp__cal-month-year"}),weekDays:D.createElem("div",{class:"dudp__weekdays"},p,!0),datesHolder:D.createElem("div",{class:"dudp__dates-holder"})},o=0==n?11:n-1,s=11==n?0:1+n,l=0==n?a-1:a,c=11==n?1+a:a;D.appendTo([D.createElem("span",{class:"cal-month"},E[o]),D.createElem("span",{class:"cal-year"},l)],d.header),D.appendTo(e._getDates(l,o),d.datesHolder),D.appendTo([d.header,d.weekDays,d.datesHolder],d.wrapper),t.calendars.push(d),D.appendTo([D.createElem("span",{class:"cal-month"},E[n]),D.createElem("span",{class:"cal-year"},a)],r.header),D.appendTo(e._getDates(a,n),r.datesHolder),D.appendTo([r.header,r.weekDays,r.datesHolder],r.wrapper),t.calendars.push(r),D.appendTo([D.createElem("span",{class:"cal-month"},E[s]),D.createElem("span",{class:"cal-year"},c)],i.header),D.appendTo(e._getDates(c,s),i.datesHolder),D.appendTo([i.header,i.weekDays,i.datesHolder],i.wrapper),t.calendars.push(i),D.empty(t.wrapper),D.appendTo([d.wrapper,r.wrapper,i.wrapper],t.wrapper)}},{key:"_switchView",value:function(e){if("calendar"===e||"months"===e||"years"===e){var t=this,a=t.datepicker,n=a.calendarHolder.monthsView,r=a.calendarHolder.yearsView,d=a.calendarHolder.calendarViews.wrapper,i=t.viewMode;switch(t.viewMode=e,t.viewMode){case"calendar":var o=d.querySelector(".dudp__calendar:nth-child(2)");d.classList.add("dp__animate-out"),d.classList.remove("dp__hidden"),"calendar"!==i&&o.classList.add("dp__zooming","dp__animate-zoom"),a.calendarHolder.btnPrev.classList.remove("dp__hidden"),a.calendarHolder.btnNext.classList.remove("dp__hidden"),setTimeout(function(){d.classList.remove("dp__animate-out"),"calendar"!==i&&o.classList.remove("dp__animate-zoom")},10),n.classList.add("dp__animate-out"),r.classList.add("dp__hidden"),setTimeout(function(){"calendar"!==i&&o.classList.remove("dp__zooming"),n.classList.add("dp__hidden"),n.classList.remove("dp__animate-out")},250);break;case"months":a.calendarHolder.btnPrev.classList.add("dp__hidden"),a.calendarHolder.btnNext.classList.add("dp__hidden"),d.classList.add("dp__animate-out"),n.classList.add("dp__animate-out"),n.classList.remove("dp__hidden"),setTimeout(function(){n.classList.remove("dp__animate-out")},10),setTimeout(function(){d.classList.add("dp__hidden"),d.classList.remove("dp__animate-out")},250);break;case"years":D.empty(r),D.appendTo(t._getYears(),r);var s=r.querySelector(".dudp__year.selected");r.scrollTop=s.offsetTop-120,a.calendarHolder.btnPrev.classList.add("dp__hidden"),a.calendarHolder.btnNext.classList.add("dp__hidden"),n.classList.add("dp__animate-out"),d.classList.add("dp__animate-out"),r.classList.remove("dp__hidden"),setTimeout(function(){d.classList.add("dp__hidden"),d.classList.remove("dp__animate-out"),n.classList.add("dp__hidden"),n.classList.remove("dp__animate-out")},250)}}}},{key:"_move",value:function(e){var t,a,n,r,d,i,o,s;"next"!==e&&"prev"!==e||((t=this).animating||(a=t.datepicker.calendarHolder.calendarViews,((n="next"===e)?11<t.viewMonth+1:t.viewMonth-1<0)&&(t.viewYear+=n?1:-1),t.viewMonth=n?11<t.viewMonth+1?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0,r="dp__animate-"+(n?"left":"right"),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.add(r)}),d=t.viewYear,i=n?t.viewMonth+1:t.viewMonth-1,(n?11<i:i<0)&&(i=n?0:11,d+=n?1:-1),o=t._getDates(d,i),s={wrapper:D.createElem("div",{class:"dudp__calendar"}),header:D.createElem("div",{class:"dudp__cal-month-year"}),weekDays:D.createElem("div",{class:"dudp__weekdays"},p,!0),datesHolder:D.createElem("div",{class:"dudp__dates-holder"})},D.appendTo([D.createElem("span",{class:"cal-month"},E[i]),D.createElem("span",{class:"cal-year"},d)],s.header),D.appendTo(o,s.datesHolder),D.appendTo([s.header,s.weekDays,s.datesHolder],s.wrapper),setTimeout(function(){D.appendTo(s.wrapper,a.wrapper,n?void 0:0),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.remove(r)}),a.wrapper.removeChild(a.calendars[n?0:2].wrapper),a.calendars[n?"shift":"pop"](),a.calendars[n?"push":"unshift"](s),t.animating=!1},250)))}},{key:"_resetSelection",value:function(){var e,n=this;n.config.range?(e=n.dateFrom?n.dateFrom:new Date,n.rangeFrom=n.dateFrom?{year:n.dateFrom.getFullYear(),month:n.dateFrom.getMonth(),date:n.dateFrom.getDate()}:null,n.rangeTo=n.dateTo?{year:n.dateTo.getFullYear(),month:n.dateTo.getMonth(),date:n.dateTo.getDate()}:null,n.viewYear=e.getFullYear(),n.viewMonth=e.getMonth()):(n.selected={year:n.date.getFullYear(),month:n.date.getMonth(),date:n.date.getDate()},n.viewYear=n.selected.year,n.viewMonth=n.selected.month),n.datepicker.calendarHolder.monthsView.querySelectorAll(".dudp__month").forEach(function(e){var t=parseInt(e.dataset.month),a=n.config.range?n.dateFrom?n.dateFrom.getMonth():null:n.selected.month;e.classList[t===a?"add":"remove"]("selected")})}},{key:"_setSelection",value:function(){var e=this,t=e.datepicker,a=e.config.range?new Date:new Date(e.selected.year,e.selected.month,e.selected.date);t.header.selectedYear.innerText=a.getFullYear(),t.header.selectedDate.innerText=D.formatDate(a,"D, mmm d")}},{key:"setValue",value:function(e){if(void 0===e)throw new Error("Expecting a value.");var t=this,a="string"==typeof e&&""===e,n=null;if(t.config.range){var r=a?[]:e.split(t.config.rangeDelim);if(""!==e&&r.length<2)throw new Error("Invalid date range value.");var d=new Date,i=a?null:D.parseDate.call(t,r[0]).date,o=a?null:D.parseDate.call(t,r[1]).date,s=a?"":D.formatDate(i,t.config.format),l=a?"":D.formatDate(i,t.config.outFormat||t.config.format),c=a?"":D.formatDate(o,t.config.format),u=a?"":D.formatDate(o,t.config.outFormat||t.config.format),m=a?"":t.config.events&&t.config.events.onRangeFormat?t.formatRange(i,o):r[0]===r[1]?r[0]:e;t.dateFrom=i,t.dateTo=o,t.viewYear=(i||d).getFullYear(),t.viewMonth=(i||d).getMonth(),t.input.value=m,D.setAttributes(t.input,{value:m,"data-range-from":l,"data-range-to":u}),t.fromEl&&(t.fromEl.value=s,D.setAttributes(t.fromEl,{value:s,"data-value":l})),t.toEl&&(t.toEl.value=c,D.setAttributes(t.toEl,{value:c,"data-value":u})),n={_dateFrom:i,dateFrom:a?null:s,_dateTo:o,dateTo:a?null:c,value:m}}else{var p="string"==typeof e?a?new Date:D.parseDate.call(t,e,t.config.format).date:e,f=a?"":D.formatDate(p,t.config.format);t.date=p,t.viewYear=p.getFullYear(),t.viewMonth=p.getMonth(),t.input.value=f,t.input.setAttribute("value",f),n={_date:a?null:t.date,date:a?null:D.formatDate(t.date,t.config.outFormat||t.config.format)}}D.triggerChange(t.input,n),t.config.events&&t.config.events.dateChanged&&t.config.events.dateChanged.call(t,n,t)}},{key:"formatDate",value:function(e,t){return D.formatDate(e,t)}},{key:"formatRange",value:function(e,t){return this.config.events.onRangeFormat.call(this,e,t,this)}},{key:"show",value:function(){var c=this;setTimeout(function(){var e,t,a,n,r,d,i,o,s,l;D.setAttributes(document.body,{"datepicker-display":"on"}),c._resetSelection(),c._setSelection(),c._setupCalendar(),c.datepicker.container.classList.add("dp__open"),c.config.inline&&(e=c.showInFromEl?c.fromEl:c.showInToEl?c.toEl:c.input,t=D.calcOffset(e),a=c.datepicker.wrapper.offsetHeight,n=c.datepicker.wrapper.offsetWidth,r=D.screenDim(),d=t.top+a<r.height,i=t.left+n<r.width,o={},s=window.scrollY,l=window.scrollX,o[d?"top":"bottom"]="".concat(d?t.top-s:t.bottom,"px"),o[i?"left":"right"]="".concat(i?t.left-l:t.right,"px"),c.datepicker.container.removeAttribute("style"),D.setStyles(c.datepicker.container,o)),c.datepicker.wrapper.focus(),c.visible=!0,c.input.blur(),c.config.events&&c.config.events.shown&&c.config.events.shown.call(c,c)},0)}},{key:"hide",value:function(){var e=this;e.datepicker.container.classList.add("dp__closing"),e.visible=!1,e.input.focus(),document.body.removeAttribute("datepicker-display"),setTimeout(function(){e._switchView("calendar"),e.datepicker.container.classList.remove("dp__closing","dp__open"),e.config.events&&e.config.events.hidden&&e.config.events.hidden.call(e,e)},200)}},{key:"destroy",value:function(){this._unbindInput(),document.body.removeChild(this.datepicker.container),delete this.input[o]}}])&&n(e.prototype,t),a&&n(e,a),g}();return function(){var a=arguments,n=a[0],r=n instanceof NodeList||Array.isArray(n),d=n instanceof Element,e="string"==typeof n?document.querySelectorAll(n):r?n:d?[n]:document.querySelectorAll(".duDatepicker-input"),i="object"!==t(n)||r||d?a[1]&&"object"===t(a[1])?a[1]:{}:n;Array.from(e).forEach(function(e){var t=e[o];t||(e[o]=t=new s(e,i)),("string"==typeof n||r||d)&&a[1]&&"string"==typeof a[1]&&t[a[1]].apply(t,Array.prototype.slice.call(a).slice(2))})}});